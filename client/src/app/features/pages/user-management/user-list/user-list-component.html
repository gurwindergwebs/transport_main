<app-breadcrumb-component [items]="breadcrumbItems"></app-breadcrumb-component>

<div class="space-y-6">
    <!-- Header Card -->
    <div class="card bg-white rounded-2xl shadow-md px-6 py-4 border-t-4 border-blue-600">
        <div class="flex justify-between items-center">
            <h2 class="text-[1.8rem] font-medium">Users</h2>
            <div class="flex justify-center items-center w-full md:w-1/3">
                <input type="search" class="w-80 px-4 py-2 border rounded-md" placeholder="Search Users by name..."
                    [(ngModel)]="searchQuery" (input)="filterUsers()" />
            </div>
            <a role="button" (click)="openModal()"
                class="bg-yellow-300 py-3 px-5 font-medium text-[0.9rem] rounded-lg flex gap-3 items-center justify-center">
                <i class="fa-solid fa-user-plus"></i>
                <span> Add New</span></a>
        </div>
    </div>

    <!-- Table -->
    <div class="relative overflow-x-auto shadow-lg sm:rounded-xl border border-gray-200">
        <table class="w-full text-sm text-left text-gray-600">
            <thead class="text-xs uppercase bg-gray-100 text-gray-700">
                <tr>
                    <th scope="col" class="px-6 py-3">S.No.</th>
                    <th scope="col" class="px-6 py-3">Name</th>
                    <th scope="col" class="px-6 py-3">Email</th>
                    <th scope="col" class="px-6 py-3">Joining date</th>
                    <th scope="col" class="px-6 py-3">Status</th>
                    <th scope="col" class="px-6 py-3">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of filteredUsers; index as i" class="bg-white hover:bg-gray-200 transition">
                    <td class="px-6 py-4 font-medium text-gray-800">{{ i + 1 }}.</td>
                    <td class="px-6 py-4" [innerHTML]="user.name | highlight : searchQuery">
                        {{ user.name }}
                    </td>
                    <td class="px-6 py-4">{{ user.email }}</td>
                    <td class="px-6 py-4">{{ user.created_at | date : "longDate" }}</td>

                    <td class="px-6 py-4">
                        <span class="text-[0.8rem] text-black py-1 px-3 capitalize rounded-lg" [ngClass]="{
                'bg-green-100': user.status == true,
                'bg-red-100': user.status == false,
                'text-green-600': user.status == true,
                'text-red-600': user.status == false,
              }">{{ user.status ? "Active" : "Inactive" }}</span>
                    </td>
                    <td class="px-6 py-4">
                        <a title="edit" (click)="openEditModal(user)"
                            class="cursor-pointer text-blue-500 m-1 hover:text-blue-600">
                            <i class="fa-regular fa-pen-to-square"></i>
                            <span>Edit</span>
                        </a>
                        <a title="delete" (click)="deleteUser(user.id)"
                            class="cursor-pointer text-red-500 m-1 hover:text-red-600">
                            <i class="fa-regular fa-pen-to-square"></i>
                            <span>Delete</span>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div *ngIf="filteredUsers.length === 0" class="flex flex-col items-center justify-center mt-48 text-center">
        <h2 class="text-lg font-semibold text-red-500">No Users Found!</h2>
    </div>
</div>